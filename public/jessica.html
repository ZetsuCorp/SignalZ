<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Jessica Auto Feed</title>
  <link rel="stylesheet" href="jessica.css" />
</head>
<body>
  <h1>ðŸ¤– Jessicaâ€™s Feed</h1>
  <div class="jessica-feed" id="feed"></div>

  <script>
    const API_KEY = 'AIzaSyBqlCCuh41JXepJP1YRv2XJcdNfyp0WsqI';
    const CX = 'b3aed2fbcf2074d6a';

    const queries = [
      { platform: "ðŸŸ¦ Twitter", query: "new on twitter" },
      { platform: "âš« X", query: "latest X posts" },
      { platform: "ðŸ”´ Reddit", query: "breaking reddit news" },
      { platform: "ðŸŽµ TikTok", query: "viral TikToks July 17" },
    ];

    const feed = document.getElementById('feed');
    const DEFAULT_IMG = 'https://via.placeholder.com/600x300/00f0ff/000?text=Jessica+AI';

    async function fetchAndRender({ platform, query }) {
      const url = `https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${CX}&q=${encodeURIComponent(query)}&gl=US&hl=en`;

      try {
        const res = await fetch(url);
        const data = await res.json();

        const posts = (data.items || []).filter(item =>
          item.link &&
          item.snippet && item.snippet.length > 30 &&
          !item.link.includes("feed/trending") &&
          !item.link.includes("explore")
        );

        posts.forEach(item => {
          const card = document.createElement('div');
          card.className = 'jessica-post';

          card.innerHTML = `
            <div class="jessica-img">
              <img src="${DEFAULT_IMG}" alt="Preview">
            </div>
            <div class="jessica-meta">
              <span class="jessica-platform">${platform}</span>
            </div>
            <h2 class="jessica-title">${item.title}</h2>
            <p class="jessica-snippet">${item.snippet}</p>
            <a href="${item.link}" target="_blank" class="jessica-link">Open Post</a>
          `;

          feed.appendChild(card);
        });
      } catch (err) {
        console.warn(`Jessica failed on ${platform}:`, err);
      }
    }

    queries.forEach(fetchAndRender);
  </script>
</body>
</html>
